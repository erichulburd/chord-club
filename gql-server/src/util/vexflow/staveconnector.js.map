{"version":3,"sources":["../../../node_modules/vexflow/src/staveconnector.js"],"names":["drawBoldDoubleLine","ctx","type","topX","topY","botY","StaveConnector","BOLD_DOUBLE_LEFT","BOLD_DOUBLE_RIGHT","Vex","RERR","x_shift","variableWidth","thickLineOffset","fillRect","Element","SINGLE_RIGHT","SINGLE_LEFT","SINGLE","DOUBLE","BRACE","BRACKET","THIN_DOUBLE","NONE","typeString","singleRight","singleLeft","single","double","brace","bracket","boldDoubleLeft","boldDoubleRight","thinDouble","none","constructor","top_stave","bottom_stave","setAttribute","thickness","Flow","STAVE_LINE_THICKNESS","width","font","family","size","weight","texts","setType","setText","text","options","push","content","Merge","shift_x","shift_y","setFont","setXShift","draw","checkContext","setRendered","getYForLine","getNumLines","getX","isRightSidedConnector","attachment_height","x1","y1","x3","y3","x2","y2","cpx1","cpy1","cpx2","cpy2","cpx3","cpy3","cpx4","cpy4","cpx5","cpy5","cpx6","cpy6","cpx7","cpy7","cpx8","cpy8","beginPath","moveTo","bezierCurveTo","fill","stroke","Glyph","renderGlyph","save","lineWidth","i","length","text_width","measureText","x","y","getBottomLineY","fillText","restore"],"mappings":"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","sourcesContent":["// [VexFlow](http://vexflow.com) - Copyright (c) Mohit Muthanna 2010.\n\nimport { Vex } from './vex';\nimport { Element } from './element';\nimport { Flow } from './tables';\nimport { Glyph } from './glyph';\n\nfunction drawBoldDoubleLine(ctx, type, topX, topY, botY) {\n  if (\n    type !== StaveConnector.type.BOLD_DOUBLE_LEFT &&\n    type !== StaveConnector.type.BOLD_DOUBLE_RIGHT\n  ) {\n    throw new Vex.RERR(\n      'InvalidConnector', 'A REPEAT_BEGIN or REPEAT_END type must be provided.'\n    );\n  }\n\n  let x_shift = 3;\n  let variableWidth = 3.5; // Width for avoiding anti-aliasing width issues\n  const thickLineOffset = 2; // For aesthetics\n\n  if (type === StaveConnector.type.BOLD_DOUBLE_RIGHT) {\n    x_shift = -5; // Flips the side of the thin line\n    variableWidth = 3;\n  }\n\n  // Thin line\n  ctx.fillRect(topX + x_shift, topY, 1, botY - topY);\n  // Thick line\n  ctx.fillRect(topX - thickLineOffset, topY, variableWidth, botY - topY);\n}\n\nexport class StaveConnector extends Element {\n  // SINGLE_LEFT and SINGLE are the same value for compatibility\n  // with older versions of vexflow which didn't have right sided\n  // stave connectors\n  static get type() {\n    return {\n      SINGLE_RIGHT: 0,\n      SINGLE_LEFT: 1,\n      SINGLE: 1,\n      DOUBLE: 2,\n      BRACE: 3,\n      BRACKET: 4,\n      BOLD_DOUBLE_LEFT: 5,\n      BOLD_DOUBLE_RIGHT: 6,\n      THIN_DOUBLE: 7,\n      NONE: 8,\n    };\n  }\n\n  static get typeString() {\n    return {\n      singleRight: StaveConnector.type.SINGLE_RIGHT,\n      singleLeft: StaveConnector.type.SINGLE_LEFT,\n      single: StaveConnector.type.SINGLE,\n      double: StaveConnector.type.DOUBLE,\n      brace: StaveConnector.type.BRACE,\n      bracket: StaveConnector.type.BRACKET,\n      boldDoubleLeft: StaveConnector.type.BOLD_DOUBLE_LEFT,\n      boldDoubleRight: StaveConnector.type.BOLD_DOUBLE_RIGHT,\n      thinDouble: StaveConnector.type.THIN_DOUBLE,\n      none: StaveConnector.type.NONE,\n    };\n  }\n\n  constructor(top_stave, bottom_stave) {\n    super();\n    this.setAttribute('type', 'StaveConnector');\n\n    this.thickness = Flow.STAVE_LINE_THICKNESS;\n    this.width = 3;\n    this.top_stave = top_stave;\n    this.bottom_stave = bottom_stave;\n    this.type = StaveConnector.type.DOUBLE;\n    this.font = {\n      family: 'times',\n      size: 16,\n      weight: 'normal',\n    };\n    // 1. Offset Bold Double Left to align with offset Repeat Begin bars\n    // 2. Offset BRACE type not to overlap with another StaveConnector\n    this.x_shift = 0;\n    this.texts = [];\n  }\n\n  setType(type) {\n    type = typeof(type) === 'string'\n      ? StaveConnector.typeString[type]\n      : type;\n\n    if (type >= StaveConnector.type.SINGLE_RIGHT && type <= StaveConnector.type.NONE) {\n      this.type = type;\n    }\n    return this;\n  }\n\n  setText(text, options) {\n    this.texts.push({\n      content: text,\n      options: Vex.Merge({ shift_x: 0, shift_y: 0 }, options),\n    });\n    return this;\n  }\n\n  setFont(font) {\n    Vex.Merge(this.font, font);\n  }\n\n  setXShift(x_shift) {\n    if (typeof x_shift !== 'number') {\n      throw Vex.RERR('InvalidType', 'x_shift must be a Number');\n    }\n\n    this.x_shift = x_shift;\n    return this;\n  }\n\n  draw() {\n    const ctx = this.checkContext();\n    this.setRendered();\n\n    let topY = this.top_stave.getYForLine(0);\n    let botY = this.bottom_stave.getYForLine(this.bottom_stave.getNumLines() - 1) +\n      this.thickness;\n    let width = this.width;\n    let topX = this.top_stave.getX();\n\n    const isRightSidedConnector = (\n      this.type === StaveConnector.type.SINGLE_RIGHT ||\n      this.type === StaveConnector.type.BOLD_DOUBLE_RIGHT ||\n      this.type === StaveConnector.type.THIN_DOUBLE\n    );\n\n    if (isRightSidedConnector) {\n      topX = this.top_stave.getX() + this.top_stave.width;\n    }\n\n    let attachment_height = botY - topY;\n    switch (this.type) {\n      case StaveConnector.type.SINGLE:\n        width = 1;\n        break;\n      case StaveConnector.type.SINGLE_LEFT:\n        width = 1;\n        break;\n      case StaveConnector.type.SINGLE_RIGHT:\n        width = 1;\n        break;\n      case StaveConnector.type.DOUBLE:\n        topX -= (this.width + 2);\n        topY -= this.thickness;\n        attachment_height += 0.5;\n        break;\n      case StaveConnector.type.BRACE: {\n        width = 12;\n        // May need additional code to draw brace\n        const x1 = this.top_stave.getX() - 2 + this.x_shift;\n        const y1 = topY;\n        const x3 = x1;\n        const y3 = botY;\n        const x2 = x1 - width;\n        const y2 = y1 + attachment_height / 2.0;\n        const cpx1 = x2 - (0.90 * width);\n        const cpy1 = y1 + (0.2 * attachment_height);\n        const cpx2 = x1 + (1.10 * width);\n        const cpy2 = y2 - (0.135 * attachment_height);\n        const cpx3 = cpx2;\n        const cpy3 = y2 + (0.135 * attachment_height);\n        const cpx4 = cpx1;\n        const cpy4 = y3 - (0.2 * attachment_height);\n        const cpx5 = x2 - width;\n        const cpy5 = cpy4;\n        const cpx6 = x1 + (0.40 * width);\n        const cpy6 = y2 + (0.135 * attachment_height);\n        const cpx7 = cpx6;\n        const cpy7 = y2 - (0.135 * attachment_height);\n        const cpx8 = cpx5;\n        const cpy8 = cpy1;\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        ctx.bezierCurveTo(cpx3, cpy3, cpx4, cpy4, x3, y3);\n        ctx.bezierCurveTo(cpx5, cpy5, cpx6, cpy6, x2, y2);\n        ctx.bezierCurveTo(cpx7, cpy7, cpx8, cpy8, x1, y1);\n        ctx.fill();\n        ctx.stroke();\n        break;\n      } case StaveConnector.type.BRACKET:\n        topY -= 6;\n        botY += 6;\n        attachment_height = botY - topY;\n        Glyph.renderGlyph(ctx, topX - 5, topY, 40, 'bracketTop');\n        Glyph.renderGlyph(ctx, topX - 5, botY, 40, 'bracketBottom');\n        topX -= (this.width + 2);\n        break;\n      case StaveConnector.type.BOLD_DOUBLE_LEFT:\n        drawBoldDoubleLine(ctx, this.type, topX + this.x_shift, topY, botY - this.thickness);\n        break;\n      case StaveConnector.type.BOLD_DOUBLE_RIGHT:\n        drawBoldDoubleLine(ctx, this.type, topX, topY, botY - this.thickness);\n        break;\n      case StaveConnector.type.THIN_DOUBLE:\n        width = 1;\n        attachment_height -= this.thickness;\n        break;\n      case StaveConnector.type.NONE:\n        break;\n      default:\n        throw new Vex.RERR(\n          'InvalidType', `The provided StaveConnector.type (${this.type}) is invalid`\n        );\n    }\n\n    if (\n      this.type !== StaveConnector.type.BRACE &&\n      this.type !== StaveConnector.type.BOLD_DOUBLE_LEFT &&\n      this.type !== StaveConnector.type.BOLD_DOUBLE_RIGHT &&\n      this.type !== StaveConnector.type.NONE\n    ) {\n      ctx.fillRect(topX, topY, width, attachment_height);\n    }\n\n    // If the connector is a thin double barline, draw the paralell line\n    if (this.type === StaveConnector.type.THIN_DOUBLE) {\n      ctx.fillRect(topX - 3, topY, width, attachment_height);\n    }\n\n    ctx.save();\n    ctx.lineWidth = 2;\n    ctx.setFont(this.font.family, this.font.size, this.font.weight);\n    // Add stave connector text\n    for (let i = 0; i < this.texts.length; i++) {\n      const text = this.texts[i];\n      const text_width = ctx.measureText('' + text.content).width;\n      const x = this.top_stave.getX() - text_width - 24 + text.options.shift_x;\n      const y = (this.top_stave.getYForLine(0) + this.bottom_stave.getBottomLineY()) / 2 +\n        text.options.shift_y;\n\n      ctx.fillText('' + text.content, x, y + 4);\n    }\n    ctx.restore();\n  }\n}\n"],"file":"staveconnector.js"}