{"version":3,"sources":["../../../node_modules/vexflow/src/tuning.js"],"names":["Tuning","names","constructor","tuningString","setTuning","noteToInteger","noteString","Flow","keyProperties","int_value","tuningValues","numStrings","keys","split","length","Vex","RERR","i","getValueForString","stringNum","s","parseInt","getValueForFret","fretNum","stringValue","f","getNoteForFret","noteValue","octave","Math","floor","value","integerToNote"],"mappings":";;;;;;;AAKA;;AACA;;AANA;AACA;AACA;AACA;AAKO,MAAMA,MAAN,CAAa;AAClB,aAAWC,KAAX,GAAmB;AACjB,WAAO;AACL,kBAAY,yBADP;AAEL,gBAAU,yBAFL;AAGL,eAAS,yBAHJ;AAIL,YAAM,+BAJD;AAKL,uBAAiB;AALZ,KAAP;AAOD;;AAEDC,EAAAA,WAAW,CAACC,YAAY,GAAG,iCAAhB,EAAmD;AAC5D;AACA,SAAKC,SAAL,CAAeD,YAAf;AACD;;AAEDE,EAAAA,aAAa,CAACC,UAAD,EAAa;AACxB,WAAOC,aAAKC,aAAL,CAAmBF,UAAnB,EAA+BG,SAAtC;AACD;;AAEDL,EAAAA,SAAS,CAACE,UAAD,EAAa;AACpB,QAAIN,MAAM,CAACC,KAAP,CAAaK,UAAb,CAAJ,EAA8B;AAC5BA,MAAAA,UAAU,GAAGN,MAAM,CAACC,KAAP,CAAaK,UAAb,CAAb;AACD;;AAED,SAAKH,YAAL,GAAoBG,UAApB;AACA,SAAKI,YAAL,GAAoB,EAApB;AACA,SAAKC,UAAL,GAAkB,CAAlB;AAEA,UAAMC,IAAI,GAAGN,UAAU,CAACO,KAAX,CAAiB,SAAjB,CAAb;;AACA,QAAID,IAAI,CAACE,MAAL,KAAgB,CAApB,EAAuB;AACrB,YAAM,IAAIC,SAAIC,IAAR,CAAa,cAAb,EAA6B,4BAA4BV,UAAzD,CAAN;AACD;;AAED,SAAKK,UAAL,GAAkBC,IAAI,CAACE,MAAvB;;AACA,SAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKN,UAAzB,EAAqC,EAAEM,CAAvC,EAA0C;AACxC,WAAKP,YAAL,CAAkBO,CAAlB,IAAuB,KAAKZ,aAAL,CAAmBO,IAAI,CAACK,CAAD,CAAvB,CAAvB;AACD;AACF;;AAEDC,EAAAA,iBAAiB,CAACC,SAAD,EAAY;AAC3B,UAAMC,CAAC,GAAGC,QAAQ,CAACF,SAAD,EAAY,EAAZ,CAAlB;;AACA,QAAIC,CAAC,GAAG,CAAJ,IAASA,CAAC,GAAG,KAAKT,UAAtB,EAAkC;AAChC,YAAM,IAAII,SAAIC,IAAR,CACJ,cADI,EACa,uCAAsC,KAAKL,UAAW,IAAGQ,SAAU,EADhF,CAAN;AAGD;;AAED,WAAO,KAAKT,YAAL,CAAkBU,CAAC,GAAG,CAAtB,CAAP;AACD;;AAEDE,EAAAA,eAAe,CAACC,OAAD,EAAUJ,SAAV,EAAqB;AAClC,UAAMK,WAAW,GAAG,KAAKN,iBAAL,CAAuBC,SAAvB,CAApB;AACA,UAAMM,CAAC,GAAGJ,QAAQ,CAACE,OAAD,EAAU,EAAV,CAAlB;;AAEA,QAAIE,CAAC,GAAG,CAAR,EAAW;AACT,YAAM,IAAIV,SAAIC,IAAR,CAAa,cAAb,EAA6B,sCAC/BO,OADE,CAAN;AAED;;AAED,WAAOC,WAAW,GAAGC,CAArB;AACD;;AAEDC,EAAAA,cAAc,CAACH,OAAD,EAAUJ,SAAV,EAAqB;AACjC,UAAMQ,SAAS,GAAG,KAAKL,eAAL,CAAqBC,OAArB,EAA8BJ,SAA9B,CAAlB;AAEA,UAAMS,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,SAAS,GAAG,EAAvB,CAAf;AACA,UAAMI,KAAK,GAAGJ,SAAS,GAAG,EAA1B;AAEA,WAAOpB,aAAKyB,aAAL,CAAmBD,KAAnB,IAA4B,GAA5B,GAAkCH,MAAzC;AACD;;AAtEiB;;QAAP5B,M,GAAAA,M","sourcesContent":["// [VexFlow](http://vexflow.com) - Copyright (c) Mohit Muthanna 2010.\n//\n// ## Description\n// This class implements varies types of tunings for tablature.\n\nimport { Vex } from './vex';\nimport { Flow } from './tables';\n\nexport class Tuning {\n  static get names() {\n    return {\n      'standard': 'E/5,B/4,G/4,D/4,A/3,E/3',\n      'dagdad': 'D/5,A/4,G/4,D/4,A/3,D/3',\n      'dropd': 'E/5,B/4,G/4,D/4,A/3,D/3',\n      'eb': 'Eb/5,Bb/4,Gb/4,Db/4,Ab/3,Db/3',\n      'standardBanjo': 'D/5,B/4,G/4,D/4,G/5',\n    };\n  }\n\n  constructor(tuningString = 'E/5,B/4,G/4,D/4,A/3,E/3,B/2,E/2') {\n    // Default to standard tuning.\n    this.setTuning(tuningString);\n  }\n\n  noteToInteger(noteString) {\n    return Flow.keyProperties(noteString).int_value;\n  }\n\n  setTuning(noteString) {\n    if (Tuning.names[noteString]) {\n      noteString = Tuning.names[noteString];\n    }\n\n    this.tuningString = noteString;\n    this.tuningValues = [];\n    this.numStrings = 0;\n\n    const keys = noteString.split(/\\s*,\\s*/);\n    if (keys.length === 0) {\n      throw new Vex.RERR('BadArguments', 'Invalid tuning string: ' + noteString);\n    }\n\n    this.numStrings = keys.length;\n    for (let i = 0; i < this.numStrings; ++i) {\n      this.tuningValues[i] = this.noteToInteger(keys[i]);\n    }\n  }\n\n  getValueForString(stringNum) {\n    const s = parseInt(stringNum, 10);\n    if (s < 1 || s > this.numStrings) {\n      throw new Vex.RERR(\n        'BadArguments', `String number must be between 1 and ${this.numStrings}:${stringNum}`\n      );\n    }\n\n    return this.tuningValues[s - 1];\n  }\n\n  getValueForFret(fretNum, stringNum) {\n    const stringValue = this.getValueForString(stringNum);\n    const f = parseInt(fretNum, 10);\n\n    if (f < 0) {\n      throw new Vex.RERR('BadArguments', 'Fret number must be 0 or higher: ' +\n          fretNum);\n    }\n\n    return stringValue + f;\n  }\n\n  getNoteForFret(fretNum, stringNum) {\n    const noteValue = this.getValueForFret(fretNum, stringNum);\n\n    const octave = Math.floor(noteValue / 12);\n    const value = noteValue % 12;\n\n    return Flow.integerToNote(value) + '/' + octave;\n  }\n}\n"],"file":"tuning.js"}