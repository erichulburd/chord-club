{"version":3,"sources":["../../../node_modules/vexflow/src/factory.js"],"names":["L","args","Factory","DEBUG","Vex","X","MakeException","setDefaults","params","defaults","default_options","options","Object","assign","constructor","stave","space","renderer","context","elementId","backend","Renderer","Backends","SVG","width","height","background","font","face","point","style","setOptions","newFromElementId","reset","renderQ","systems","staves","voices","getOptions","key","initRenderer","buildContext","getContext","setContext","getStave","getVoices","spacing","Stave","x","y","spacing_between_lines_px","push","TabStave","StaveNote","noteStruct","note","setStave","GlyphNote","glyph","RepeatNote","type","GhostNote","ghostNote","TextNote","textNoteStruct","textNote","BarNote","barNote","ClefNote","size","clefNote","annotation","TimeSigNote","time","timeSigNote","KeySigNote","keySigNote","cancelKey","alterKey","TabNote","GraceNote","GraceNoteGroup","group","notes","slur","Accidental","accid","Annotation","text","vJustify","hJustify","fontFamily","fontSize","fontWeight","setJustification","setVerticalJustification","setFont","Articulation","position","articulation","setPosition","TextDynamics","duration","dots","line","Fingering","number","fingering","FretHandFinger","StringNumber","stringNumber","TickContext","ModifierContext","MultiMeasureRest","multimeasurerest","number_of_measures","Voice","voice","StaveConnector","top_stave","bottom_stave","connector","setType","Formatter","Tuplet","tuplet","Beam","autoStem","secondaryBeamBreaks","beam","breakSecondaryAt","Curve","from","to","curve","StaveTie","first_indices","last_indices","direction","undefined","tie","first_note","last_note","setDirection","StaveLine","setText","VibratoBracket","harsh","vibratoBracket","start","stop","setLine","setHarsh","TextBracket","superscript","textBracket","System","factory","system","EasyScore","PedalMarking","pedal","setStyle","StylesString","NoteSubGroup","draw","forEach","i","format","isRendered"],"mappings":"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","sourcesContent":["// [VexFlow](http://vexflow.com) - Copyright (c) Mohit Muthanna 2010.\n// @author Mohit Cheppudira\n//\n// ## Description\n//\n// This file implements a high level API around VexFlow. It will eventually\n// become the canonical way to use VexFlow.\n//\n// *This API is currently DRAFT*\n\nimport { Vex } from './vex';\nimport { Accidental } from './accidental';\nimport { Articulation } from './articulation';\nimport { Annotation } from './annotation';\nimport { Formatter } from './formatter';\nimport { FretHandFinger } from './frethandfinger';\nimport { StringNumber } from './stringnumber';\nimport { TextDynamics } from './textdynamics';\nimport { ModifierContext } from './modifiercontext';\nimport { MultiMeasureRest } from './multimeasurerest';\nimport { Renderer } from './renderer';\nimport { Stave } from './stave';\nimport { StaveTie } from './stavetie';\nimport { StaveLine } from './staveline';\nimport { StaveNote } from './stavenote';\nimport { GlyphNote } from './glyphnote';\nimport { RepeatNote } from './repeatnote';\nimport { StaveConnector } from './staveconnector';\nimport { System } from './system';\nimport { TickContext } from './tickcontext';\nimport { Tuplet } from './tuplet';\nimport { Voice } from './voice';\nimport { Beam } from './beam';\nimport { Curve } from './curve';\nimport { GraceNote } from './gracenote';\nimport { GraceNoteGroup } from './gracenotegroup';\nimport { NoteSubGroup } from './notesubgroup';\nimport { EasyScore } from './easyscore';\nimport { TimeSigNote } from './timesignote';\nimport { KeySigNote } from './keysignote';\nimport { ClefNote } from './clefnote';\nimport { PedalMarking } from './pedalmarking';\nimport { TextBracket } from './textbracket';\nimport { VibratoBracket } from './vibratobracket';\nimport { GhostNote } from './ghostnote';\nimport { BarNote } from './barnote';\nimport { TabNote } from './tabnote';\nimport { TabStave } from './tabstave';\nimport { TextNote } from './textnote';\n\n// To enable logging for this class. Set `Vex.Flow.Factory.DEBUG` to `true`.\nfunction L(...args) { if (Factory.DEBUG) Vex.L('Vex.Flow.Factory', args); }\n\nexport const X = Vex.MakeException('FactoryError');\n\nfunction setDefaults(params = {}, defaults) {\n  const default_options = defaults.options;\n  params = Object.assign(defaults, params);\n  params.options = Object.assign(default_options, params.options);\n  return params;\n}\n\nexport class Factory {\n  constructor(options) {\n    L('New factory: ', options);\n    const defaults = {\n      stave: {\n        space: 10,\n      },\n      renderer: {\n        context: null,\n        elementId: '',\n        backend: Renderer.Backends.SVG,\n        width: 500,\n        height: 200,\n        background: '#FFF',\n      },\n      font: {\n        face: 'Arial',\n        point: 10,\n        style: '',\n      },\n    };\n\n    this.options = defaults;\n    this.setOptions(options);\n  }\n\n  static newFromElementId(elementId, width = 500, height = 200) {\n    return new Factory({ renderer: { elementId, width, height } });\n  }\n\n  reset() {\n    this.renderQ = [];\n    this.systems = [];\n    this.staves = [];\n    this.voices = [];\n    this.stave = null; // current stave\n  }\n\n  getOptions() { return this.options; }\n  setOptions(options) {\n    for (const key of ['stave', 'renderer', 'font']) {\n      Object.assign(this.options[key], options[key]);\n    }\n    if (this.options.renderer.elementId !== null || this.options.renderer.context) {\n      this.initRenderer();\n    }\n\n    this.reset();\n  }\n\n  initRenderer() {\n    const { elementId, backend, width, height, background } = this.options.renderer;\n    if (elementId === '') {\n      throw new X('HTML DOM element not set in Factory');\n    }\n\n    this.context = Renderer.buildContext(elementId, backend, width, height, background);\n  }\n\n  getContext() { return this.context; }\n  setContext(context) { this.context = context; return this; }\n  getStave() { return this.stave; }\n  getVoices() { return this.voices; }\n\n  // Returns pixels from current stave spacing.\n  space(spacing) { return this.options.stave.space * spacing; }\n\n  Stave(params) {\n    params = setDefaults(params, {\n      x: 0,\n      y: 0,\n      width: this.options.renderer.width - this.space(1),\n      options: {\n        spacing_between_lines_px: this.options.stave.space,\n      },\n    });\n\n    const stave = new Stave(params.x, params.y, params.width, params.options);\n    this.staves.push(stave);\n    stave.setContext(this.context);\n    this.stave = stave;\n    return stave;\n  }\n\n  TabStave(params) {\n    params = setDefaults(params, {\n      x: 0,\n      y: 0,\n      width: this.options.renderer.width - this.space(1),\n      options: {\n        spacing_between_lines_px: this.options.stave.space * 1.3,\n      },\n    });\n\n    const stave = new TabStave(params.x, params.y, params.width, params.options);\n    this.staves.push(stave);\n    stave.setContext(this.context);\n    this.stave = stave;\n    return stave;\n  }\n\n  StaveNote(noteStruct) {\n    const note = new StaveNote(noteStruct);\n    if (this.stave) note.setStave(this.stave);\n    note.setContext(this.context);\n    this.renderQ.push(note);\n    return note;\n  }\n\n  GlyphNote(glyph, noteStruct, options) {\n    const note = new GlyphNote(glyph, noteStruct, options);\n    if (this.stave) note.setStave(this.stave);\n    note.setContext(this.context);\n    this.renderQ.push(note);\n    return note;\n  }\n\n  RepeatNote(type, noteStruct, options) {\n    const note = new RepeatNote(type, noteStruct, options);\n    if (this.stave) note.setStave(this.stave);\n    note.setContext(this.context);\n    this.renderQ.push(note);\n    return note;\n  }\n\n  GhostNote(noteStruct) {\n    const ghostNote = new GhostNote(noteStruct);\n    if (this.stave) ghostNote.setStave(this.stave);\n    ghostNote.setContext(this.context);\n    this.renderQ.push(ghostNote);\n    return ghostNote;\n  }\n\n  TextNote(textNoteStruct) {\n    const textNote = new TextNote(textNoteStruct);\n    if (this.stave) textNote.setStave(this.stave);\n    textNote.setContext(this.context);\n    this.renderQ.push(textNote);\n    return textNote;\n  }\n\n  BarNote(params) {\n    params = setDefaults(params, {\n      type: 'single',\n      options: {},\n    });\n\n    const barNote = new BarNote(params.type);\n    if (this.stave) barNote.setStave(this.stave);\n    barNote.setContext(this.context);\n    this.renderQ.push(barNote);\n    return barNote;\n  }\n\n  ClefNote(params) {\n    params = setDefaults(params, {\n      type: 'treble',\n      options: {\n        size: 'default',\n      },\n    });\n\n    const clefNote = new ClefNote(params.type, params.options.size, params.options.annotation);\n    if (this.stave) clefNote.setStave(this.stave);\n    clefNote.setContext(this.context);\n    this.renderQ.push(clefNote);\n    return clefNote;\n  }\n\n  TimeSigNote(params) {\n    params = setDefaults(params, {\n      time: '4/4',\n      options: {},\n    });\n\n    const timeSigNote = new TimeSigNote(params.time);\n    if (this.stave) timeSigNote.setStave(this.stave);\n    timeSigNote.setContext(this.context);\n    this.renderQ.push(timeSigNote);\n    return timeSigNote;\n  }\n\n  KeySigNote(params) {\n    const keySigNote = new KeySigNote(params.key, params.cancelKey, params.alterKey);\n    if (this.stave) keySigNote.setStave(this.stave);\n    keySigNote.setContext(this.context);\n    this.renderQ.push(keySigNote);\n    return keySigNote;\n  }\n\n  TabNote(noteStruct) {\n    const note = new TabNote(noteStruct);\n    if (this.stave) note.setStave(this.stave);\n    note.setContext(this.context);\n    this.renderQ.push(note);\n    return note;\n  }\n\n  GraceNote(noteStruct) {\n    const note = new GraceNote(noteStruct);\n    if (this.stave) note.setStave(this.stave);\n    note.setContext(this.context);\n    return note;\n  }\n\n  GraceNoteGroup(params) {\n    const group = new GraceNoteGroup(params.notes, params.slur);\n    group.setContext(this.context);\n    return group;\n  }\n\n  Accidental(params) {\n    params = setDefaults(params, {\n      type: null,\n      options: {},\n    });\n\n    const accid = new Accidental(params.type);\n    accid.setContext(this.context);\n    return accid;\n  }\n\n  Annotation(params) {\n    params = setDefaults(params, {\n      text: 'p',\n      vJustify: 'below',\n      hJustify: 'center',\n      fontFamily: 'Times',\n      fontSize: 14,\n      fontWeight: 'bold italic',\n      options: {},\n    });\n\n    const annotation = new Annotation(params.text);\n    annotation.setJustification(params.hJustify);\n    annotation.setVerticalJustification(params.vJustify);\n    annotation.setFont(params.fontFamily, params.fontSize, params.fontWeight);\n    annotation.setContext(this.context);\n    return annotation;\n  }\n\n  Articulation(params) {\n    params = setDefaults(params, {\n      type: 'a.',\n      position: 'above',\n      options: {},\n    });\n\n    const articulation = new Articulation(params.type);\n    articulation.setPosition(params.position);\n    articulation.setContext(this.context);\n    return articulation;\n  }\n\n  TextDynamics(params) {\n    params = setDefaults(params, {\n      text: 'p',\n      duration: 'q',\n      dots: 0,\n      line: 0,\n      options: {},\n    });\n\n    const text = new TextDynamics({\n      text: params.text,\n      line: params.line,\n      duration: params.duration,\n      dots: params.dots,\n    });\n\n    if (this.stave) text.setStave(this.stave);\n    text.setContext(this.context);\n    this.renderQ.push(text);\n    return text;\n  }\n\n  Fingering(params) {\n    params = setDefaults(params, {\n      number: '0',\n      position: 'left',\n      options: {},\n    });\n\n    const fingering = new FretHandFinger(params.number);\n    fingering.setPosition(params.position);\n    fingering.setContext(this.context);\n    return fingering;\n  }\n\n  StringNumber(params) {\n    params = setDefaults(params, {\n      number: '0',\n      position: 'left',\n      options: {},\n    });\n\n    const stringNumber = new StringNumber(params.number);\n    stringNumber.setPosition(params.position);\n    stringNumber.setContext(this.context);\n    return stringNumber;\n  }\n\n  TickContext() {\n    return new TickContext().setContext(this.context);\n  }\n\n  ModifierContext() {\n    return new ModifierContext();\n  }\n\n  MultiMeasureRest(params) {\n    const multimeasurerest = new MultiMeasureRest(params.number_of_measures, params);\n    multimeasurerest.setContext(this.context);\n    this.renderQ.push(multimeasurerest);\n    return multimeasurerest;\n  }\n\n  Voice(params) {\n    params = setDefaults(params, {\n      time: '4/4',\n      options: {},\n    });\n    const voice = new Voice(params.time, params.options);\n    this.voices.push(voice);\n    return voice;\n  }\n\n  StaveConnector(params) {\n    params = setDefaults(params, {\n      top_stave: null,\n      bottom_stave: null,\n      type: 'double',\n      options: {},\n    });\n    const connector = new StaveConnector(params.top_stave, params.bottom_stave);\n    connector.setType(params.type).setContext(this.context);\n    this.renderQ.push(connector);\n    return connector;\n  }\n\n  Formatter() {\n    return new Formatter();\n  }\n\n  Tuplet(params) {\n    params = setDefaults(params, {\n      notes: [],\n      options: {},\n    });\n\n    const tuplet = new Tuplet(params.notes, params.options).setContext(this.context);\n    this.renderQ.push(tuplet);\n    return tuplet;\n  }\n\n  Beam(params) {\n    params = setDefaults(params, {\n      notes: [],\n      options: {\n        autoStem: false,\n        secondaryBeamBreaks: [],\n      },\n    });\n\n    const beam = new Beam(params.notes, params.options.autoStem).setContext(this.context);\n    beam.breakSecondaryAt(params.options.secondaryBeamBreaks);\n    this.renderQ.push(beam);\n    return beam;\n  }\n\n  Curve(params) {\n    params = setDefaults(params, {\n      from: null,\n      to: null,\n      options: {},\n    });\n\n    const curve = new Curve(params.from, params.to, params.options).setContext(this.context);\n    this.renderQ.push(curve);\n    return curve;\n  }\n\n  StaveTie(params) {\n    params = setDefaults(params, {\n      from: null,\n      to: null,\n      first_indices: [0],\n      last_indices: [0],\n      text: null,\n      options: {\n        direction: undefined,\n      },\n    });\n\n    const tie = new StaveTie({\n      first_note: params.from,\n      last_note: params.to,\n      first_indices: params.first_indices,\n      last_indices: params.last_indices,\n    }, params.text);\n\n    if (params.options.direction) tie.setDirection(params.options.direction);\n    tie.setContext(this.context);\n    this.renderQ.push(tie);\n    return tie;\n  }\n\n  StaveLine(params) {\n    params = setDefaults(params, {\n      from: null,\n      to: null,\n      first_indices: [0],\n      last_indices: [0],\n      options: {},\n    });\n\n    const line = new StaveLine({\n      first_note: params.from,\n      last_note: params.to,\n      first_indices: params.first_indices,\n      last_indices: params.last_indices,\n    });\n\n    if (params.options.text) line.setText(params.options.text);\n    if (params.options.font) line.setFont(params.options.font);\n\n    line.setContext(this.context);\n    this.renderQ.push(line);\n    return line;\n  }\n\n  VibratoBracket(params) {\n    params = setDefaults(params, {\n      from: null,\n      to: null,\n      options: {\n        harsh: false,\n      },\n    });\n\n    const vibratoBracket = new VibratoBracket({\n      start: params.from,\n      stop: params.to,\n    });\n\n    if (params.options.line) vibratoBracket.setLine(params.options.line);\n    if (params.options.harsh) vibratoBracket.setHarsh(params.options.harsh);\n\n    vibratoBracket.setContext(this.context);\n    this.renderQ.push(vibratoBracket);\n\n    return vibratoBracket;\n  }\n\n  TextBracket(params) {\n    params = setDefaults(params, {\n      from: null,\n      to: null,\n      text: '',\n      options: {\n        superscript: '',\n        position: 1,\n      },\n    });\n\n    const textBracket = new TextBracket({\n      start: params.from,\n      stop: params.to,\n      text: params.text,\n      superscript: params.options.superscript,\n      position: params.options.position,\n    });\n\n    if (params.options.line) textBracket.setLine(params.options.line);\n    if (params.options.font) textBracket.setFont(params.options.font);\n\n    textBracket.setContext(this.context);\n    this.renderQ.push(textBracket);\n    return textBracket;\n  }\n\n  System(params = {}) {\n    params.factory = this;\n    const system = new System(params).setContext(this.context);\n    this.systems.push(system);\n    return system;\n  }\n\n  EasyScore(params = {}) {\n    params.factory = this;\n    return new EasyScore(params);\n  }\n\n  PedalMarking(params = {}) {\n    params = setDefaults(params, {\n      notes: [],\n      options: {\n        style: 'mixed',\n      },\n    });\n\n    const pedal = new PedalMarking(params.notes);\n    pedal.setStyle(PedalMarking.StylesString[params.options.style]);\n    pedal.setContext(this.context);\n    this.renderQ.push(pedal);\n    return pedal;\n  }\n\n  NoteSubGroup(params = {}) {\n    params = setDefaults(params, {\n      notes: [],\n      options: {},\n    });\n\n    const group = new NoteSubGroup(params.notes);\n    group.setContext(this.context);\n    return group;\n  }\n\n  draw() {\n    this.systems.forEach(i => i.setContext(this.context).format());\n    this.staves.forEach(i => i.setContext(this.context).draw());\n    this.voices.forEach(i => i.setContext(this.context).draw());\n    this.renderQ.forEach(i => {\n      if (!i.isRendered()) i.setContext(this.context).draw();\n    });\n    this.systems.forEach(i => i.setContext(this.context).draw());\n    this.reset();\n  }\n}\n"],"file":"factory.js"}